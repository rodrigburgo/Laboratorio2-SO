<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestión de memoria</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="clases.js"></script>
    <link rel="stylesheet" href="main.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="box">
        <div class="titulo">Lista de programas</div>
        <div class="contenedorTablaProgramas">
          <table class="tabla" id="tablaProgramas">
            <thead>
              <tr>
                <th>Programa</th>
                <th>.STACK</th>
                <th>.HEAP</th>
                <th>.TEXT</th>
                <th>.DATA</th>
                <th>.BSS</th>
                <th>Tamaño</th>
                <th>Iniciar</th>
              </tr>
            </thead>
            <tbody id="programas"></tbody>
          </table>
        </div>
        <button id="nuevoPrograma">Nuevo programa</button>

        <div class="Modelo">
          <div class="titulo">Segmentación paginada</div>
          <div class="form">
            <div id="contMetodos">
              <div>
                <label for="bitsLogicos">Bits lógicos totales:</label>
                <input
                  type="number"
                  id="bitsLogicos"
                  value="32"
                  autocomplete="off"
                />
              </div>
              <div>
                <label for="bitsSegmento">Bits para número de segmento:</label>
                <input
                  type="number"
                  id="bitsSegmento"
                  value="8"
                  autocomplete="off"
                />
              </div>
              <div>
                <label for="bitsSegmento">Bits para número de pagina:</label>
                <input
                  type="number"
                  id="bitsPagina"
                  value="8"
                  autocomplete="off"
                />
              </div>
              <div>
                <label for="bitsOffset">Bits para offset:</label>
                <input
                  type="number"
                  id="bitsOffset"
                  value="16"
                  autocomplete="off"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="ordenamiento">
          <div class="titulo">Tipo de ajuste</div>
          <br />
          <label class="labelOrd"
            >Mejor ajuste
            <input
              type="radio"
              name="ordenamiento"
              value="mejor"
              checked
              disabled
            />
            <span class="checkmark"></span>
          </label>
        </div>
        <button id="empezar">Iniciar</button>
      </div>

      <div class="box" id="tablasEjec">
        <div class="titulo" id="tituloMarcos">Marcos</div>
        <div class="contenedorTablaMarcos">
          <table class="tabla" id="tablaMarcos">
            <thead>
              <tr>
                <th>Id marco</th>
                <th>Dir. base</th>
                <th>Libre</th>
              </tr>
            </thead>
            <tbody id="marcos"></tbody>
          </table>
        </div>

        <div class="titulo" id="tituloDireccion">Dirección Logica</div>
        <div id="selectorProceso">
          <label for="comboProceso">Selecciona un segmento:</label>
          <select id="comboProceso">
            <option disabled selected>Selecciona un segmento</option>
          </select>
        </div>
        <div
          class="titulo"
          id="tituloProcesoSeleccionado"
          style="display: none"
        >
          <span id="tituloTextoDir"></span>
          <button
            class="btnApagar"
            id="btnApagarProceso"
            style="margin-left: 10px"
          >
            Apagar
          </button>
        </div>
        <div
          class="contenedorTablaMarcos"
          id="contenedorTablaDirecciones"
          style="display: none"
        >
          <table class="tabla" id="tablaDireccion">
            <thead>
              <tr>
                <th>Segmento</th>
                <th>Pagina</th>
                <th>Marco</th>
              </tr>
            </thead>
            <tbody id="direcciones"></tbody>
          </table>
        </div>

        <div class="titulo" id="tituloSegmentacion" style="display: none">
          Segmentos
        </div>
        <div id="selectorSegmentos" style="display: none">
          <label for="comboSegmentos">Selecciona un segmento:</label>
          <select id="comboSegmentos">
            <option disabled selected>Selecciona un segmento</option>
          </select>
        </div>

        <div
          class="titulo"
          id="tituloSegmentoSeleccionado"
          style="display: none"
        >
          <span id="tituloTexto"></span>
          <button
            class="btnApagar"
            id="btnApagarSegmento"
            style="margin-left: 10px"
          >
            Apagar
          </button>
        </div>

        <div
          class="contenedorTablaSegmentos"
          id="contenedorTablaSegmentoUnico"
          style="display: none"
        >
          <table class="tabla">
            <thead>
              <tr>
                <th>Numero</th>
                <th>Parte</th>
              </tr>
            </thead>
            <tbody id="segmentoSeleccionado"></tbody>
          </table>
        </div>

        <div class="titulo" id="tituloLibres" style="display: none">
          Direcciones libres
        </div>
        <div class="contenedorTablaLibres" style="display: none">
          <table class="tabla" id="tablaLibres">
            <thead>
              <tr>
                <th>Tamaño</th>
                <th>Dirección</th>
              </tr>
            </thead>
            <tbody id="libres"></tbody>
          </table>
        </div>

        <div class="titulo" id="tituloTPP" style="display: none">TPP</div>
        <div class="contenedorTablaTPP" style="display: none">
          <div id="selectorTpp" style="display: none">
            <label for="comboTpp">Selecciona un proceso:</label>
            <select id="comboTpp">
              <option disabled selected>Selecciona un proceso</option>
            </select>
            <div
              class="titulo"
              id="tituloTppSeleccionado"
              style="display: none"
            >
              <span id="tituloTppTexto"></span>
              <button
                class="btnApagar"
                id="btnApagarTpp"
                style="margin-left: 10px"
              >
                Apagar
              </button>
            </div>
          </div>
          <table class="tabla" id="tablaTPP">
            <thead>
              <tr>
                <th>Página</th>
                <th>Marco (dec / hex)</th>
                <th>Parte</th>
              </tr>
            </thead>
            <tbody id="tpps"></tbody>
          </table>
        </div>
        <!-- ─────────── Selector + Tabla para SEGMENTACIÓN PAGINADA ─────────── -->
        <div id="selectorSegPagProc" style="display: none">
          <label for="comboSegPagProc">Selecciona un proceso:</label>
          <select id="comboSegPagProc">
            <option disabled selected>Selecciona un proceso</option>
          </select>
        </div>

        <div id="selectorSegPagSeg" style="display: none">
          <label for="comboSegPagSeg">Selecciona un segmento:</label>
          <select id="comboSegPagSeg">
            <option disabled selected>Selecciona un segmento</option>
          </select>
        </div>

        <div class="titulo" id="tituloSegPagSelec" style="display: none">
          <span id="tituloSegPagTexto"></span>
          <button
            class="btnApagar"
            id="btnApagarSegPag"
            style="margin-left: 10px"
          >
            Apagar
          </button>
        </div>

        <div class="contenedorTablaSegPag" style="display: none">
          <table class="tabla" id="tablaSegPag">
            <thead>
              <tr>
                <th>Página</th>
                <th>Marco (dec / hex)</th>
                <th>Parte</th>
              </tr>
            </thead>
            <tbody id="segPagPages"></tbody>
          </table>
        </div>
        <!-- ──────────────────────────────────────────────────────────────────── -->

        <div class="titulo">Diagrama de Memoria</div>
        <div class="contenedorGantt">
          <canvas id="chartMemoria" height="300"></canvas>
        </div>
      </div>

      <div
        class="box"
        style="
          display: flex;
          justify-content: center;
          align-items: flex-start; /* ✅ solución */
          max-height: 100vh;
          overflow-y: auto;
        "
      >
        <canvas id="memoria"> </canvas>
      </div>
    </div>
    <script src="logica.js"></script>
  </body>
</html>
